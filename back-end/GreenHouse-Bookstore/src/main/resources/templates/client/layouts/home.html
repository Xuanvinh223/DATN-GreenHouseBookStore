<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
    th:replace="~{client/main-layout.html :: layout (~{::title}, ~{::#layout})}">

<head>
    <title>Trang chủ</title>
</head>
<main id="layout" ng-controller="indexClientController">
    <!--=================================  Hero Area  ===================================== -->
    <section class="hero-area hero-slider-1">
        <div class="sb-slick-slider" data-slick-setting='{
                            "autoplay": true,
                            "fade": true,
                            "autoplaySpeed": 3000,
                            "speed": 3000,
                            "slidesToShow": 1,
                            "dots":true
                            }'>
            <div class="single-slide bg-shade-whisper  ">
                <div class="container">
                    <div class="home-content text-center text-sm-left position-relative">
                        <div class="hero-partial-image image-right">
                            <img src="https://bookworm.madrasthemes.com/wp-content/uploads/2020/08/img1-14.png" alt="">
                        </div>
                        <div class="row g-0">
                            <div class="col-xl-6 col-md-6 col-sm-7">
                                <div class="home-content-inner content-left-side text-start">
                                    <h1 th:text="#{lo.mn.nkmdb}">Nhận khuyến mãi <br> đặc biệt
                                    </h1>
                                    <h2 th:text="#{lo.mn.allbanner}"> Tất cả sách hiện đang được giảm giá 50%!</h2>
                                    <a href="" class="btn btn-outlined--primary" th:text="#{lo.mn.cartmenu}">
                                        Xem Thêm!
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="single-slide bg-shade-whisper">
                <div class="container">
                    <div class="home-content text-center text-sm-left position-relative">
                        <div class="hero-partial-image image-left">
                            <img src="https://templatekit.jegtheme.com/docbook/wp-content/uploads/sites/277/2022/05/Book2-Cover-Mockup-S32EJNB.png"
                                alt="" class=" image-slideshow">
                        </div>
                        <div class="row align-items-center justify-content-start justify-content-md-end">
                            <div class="col-lg-6 col-xl-7 col-md-6 col-sm-7">
                                <div class="home-content-inner content-right-side text-start">
                                    <h1 th:text="#{lo.mn.khampha}">Khám phá <br>
                                        những cuốn sách hay nhất trong ngày</h1>
                                    <h2 th:text="#{lo.mn.phieuluu}">"Những chuyến phiêu lưu đang chờ bạn trong mỗi trang
                                        sách."</h2>
                                    <a href="" class="btn btn-outlined--primary" th:text="#{lo.mn.cartmenu}">
                                        Xem Thêm!
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--=================================  End Hero Area  ===================================== -->
    <!--=================================  Flash Sale  ===================================== -->
    <section class="flash-sale-section" ng-controller="flashSaleController">
        <div class="flash-sale-container">
            <!-- Flash Sale Header -->
            <div class="flash-sale-header" ng-repeat="flash in flashSales" ng-show="flash.showCountdown"
                ng-if="flash.status == 2">
                <img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/ico_flashsale@3x.png"
                    class="flash-sale-icon">
                <span class="flash-sale-name">{{ flash.name }}</span>
                <div class="flash-sale-countdown">
                    <span class="countdown-item">{{ flash.hours }}</span>
                    <span>:</span>
                    <span class="countdown-item">{{ flash.minutes }}</span>
                    <span>:</span>
                    <span class="countdown-item">{{ flash.seconds }}</span>
                </div>
            </div>


            <!-- Flash Sale Products -->
            <div class="flash-sale-products">
                <div class="product-card" ng-repeat="proFlaSal in productFlashSales">
                    <div class="product-image">
                        <img ng-src="{{ proFlaSal.productDetail.image }}">
                        <div class="hover-contents">
                            <!-- Hover Buttons -->
                            <a href="" class="hover-btn">
                                <i class="fas fa-shopping-basket"></i>
                            </a>
                            <a href="" class="hover-btn">
                                <i class="fas fa-heart"></i>
                            </a>
                            <a href="#" data-bs-toggle="modal" data-bs-target="#quickModal" class="hover-btn">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </div>
                    <div class="price-block">
                        <span class="price">{{ proFlaSal.productDetail.priceDiscount }}</span>
                        <del class="price-old">{{ proFlaSal.productDetail.price }}</del>
                        <span class="price-discount">{{ proFlaSal.discountPercentage }}%</span>
                    </div>
                    <div class="product-header">
                        <h3><a href="">{{ proFlaSal.productDetail.product.productName }}</a></h3>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar"
                            ng-style="{'width': proFlaSal.usedQuantity / proFlaSal.quantity * 100 + '%'}"></div>
                        <span class="progress-label">Đã bán {{ proFlaSal.usedQuantity }}</span>
                    </div>
                </div>
            </div>
            <div class="center_center">
                <a class="flashsale-xemthem" href="#!flash-sale" th:text="#{lo.mn.flsee}">Xem thêm</a>
            </div>


        </div> <!-- End flashsale-container -->

    </section>
    <!-- ================================ END GỢI Ý HÔM NAY  ==================================== -->
    <!--=================================  Sản Phẩm Bán Chạy  ===================================== -->
    <section class="section-margin  container">

        <div class="flashsale-header section-title--bordered">
            <!-- Start flashsale-header -->
            <img src="https://cdn0.fahasa.com/skin/frontend/base/default/images/ico_dealhot.png"
                style="width: 25px; height: 25px;margin-left: 10px;">
            <span class="flashsale-header-title" style="margin-right:5px" th:text="#{lo.mn.sphbanchay}">SẢN PHẨM BÁN
                CHẠY </span>
        </div>
        <div class="flashsale-section">
            <div class="shop-product-wrap grid-four shop-border row space-db--30 ">
                <div class="col-lg-4 col-sm-6 mt--10"
                    ng-repeat="productDetail in sellingProducts.slice(0, visibleSellingProductsCount)">
                    <div class="product-card">
                        <div class="product-card--body">
                            <div class="card-image">
                                <img ng-src="{{ productDetail.image }}" alt="{{ productDetail.product.productName }}">
                                <div class="hover-contents">
                                    <a ng-click="getProductDetail(productDetail.productDetailId)">
                                        <img ng-src="{{ productDetail.image }}"
                                            alt="{{ productDetail.product.productName }}">
                                    </a>
                                    <div class="hover-btns">
                                        <a ng-click="addToCart(productDetail.productDetailId,1)" class="single-btn">
                                            <i class="fas fa-shopping-basket"></i>
                                        </a>

                                        <a href="#" data-bs-toggle="modal" data-bs-target="#quickModal"
                                            ng-click="quickView(productDetail)" class="single-btn">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="product-header">
                            <h3><a ng-click="getProductDetail(productDetail.productDetailId)">{{
                                    productDetail.product.productName }}</a></h3>
                        </div>
                        <div class="price-block">
                            <span class="price">{{ productDetail.priceDiscount|number:'0' }}đ</span>
                            <del class="price-old" ng-if="productDetail.price - productDetail.priceDiscount > 0">
                                {{productDetail.price |number:'0'}}
                            </del>
                            <span class="price-discount"
                                ng-if="getDiscountValueByProductId(productDetail.productDetailId)">{{getDiscountValueByProductId(productDetail.productDetailId)}}%</span>
                        </div>
                        <div class="rating-block">
                            <div class="rating-star">
                                <span class="fas fa-star"
                                    ng-class="{star_on: star <= getStarRatingByProductId(productDetail.productDetailId)}"
                                    ng-repeat="star in numStar track by $index"></span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>
    <!--=================================  End Sản Phẩm Bán Chạy  ===================================== -->
    <!-- ================================  THƯƠNG HIỆU NỔI BẬT  ======================================== -->
    <section class="section-margin container mt-3">

        <div class="flashsale-header">
            <!-- Start flashsale-header -->
            <img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/ico_flashsale@3x.png"
                style="width: 25px; height: 25px;margin-left: 10px;">
            <span class="flashsale-header-title" style="margin-right:5px" th:text="#{lo.mn.brand}">THƯƠNG HIỆU NỔI
                BẬT </span>
        </div>
        <div class="flashsale-section">
            <ul class="nav nav-pills pt-2 mb-3 justify-content-md-left ml--10 pb-2 section-title--bordered"
                id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation" ng-repeat="brand in sellingBrands">
                    <button class="nav-link" ng-class="{ 'active': brand.active }" ng-click="selectBrand(brand.brandId)"
                        aria-selected="true">
                        {{ brand.brandName }}
                    </button>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="shop" role="tabpanel" aria-labelledby="shop-tab">
                    <div class="shop-product-wrap grid-four shop-border row space-db--30">
                        <div class="col-lg-4 col-sm-6"
                            ng-repeat="productDetail in selectedBrandProducts.slice(0, visibleProductByBrandCount)">
                            <!-- Hiển thị thông tin sản phẩm chi tiết ở đây -->
                            <div class="product-card">
                                <div class="product-card--body">
                                    <div class="card-image">
                                        <img ng-src="{{ productDetail.image }}"
                                            alt="{{ productDetail.product.productName }}">
                                        <div class="hover-contents">
                                            <a ng-click="getProductDetail(productDetail.productDetailId)">
                                                <img ng-src="{{ productDetail.image }}"
                                                    alt="{{ productDetail.product.productName }}">
                                            </a>
                                            <div class="hover-btns">
                                                <a ng-click="addToCart(productDetail.productDetailId,1)"
                                                    class="single-btn">
                                                    <i class="fas fa-shopping-basket"></i>
                                                </a>

                                                <a href="#" data-bs-toggle="modal" data-bs-target="#quickModal"
                                                    ng-click="quickView(productDetail)" class="single-btn">
                                                    <i class="fas fa-eye"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="product-header">
                                    <h3><a ng-click="getProductDetail(productDetail.productDetailId)">{{
                                            productDetail.product.productName }}</a></h3>
                                </div>
                                <div class="price-block">
                                    <span class="price">{{ productDetail.priceDiscount|number:'0' }}đ</span>
                                    <del class="price-old"
                                        ng-if="productDetail.price - productDetail.priceDiscount > 0">
                                        {{productDetail.price |number:'0'}} </del>
                                    <span class="price-discount"
                                        ng-if="getDiscountValueByProductId(productDetail.productDetailId)">{{getDiscountValueByProductId(productDetail.productDetailId)}}%</span>
                                </div>
                                <div class="rating-block">
                                    <div class="rating-star">
                                        <span class="fas fa-star"
                                            ng-class="{star_on: star <= getStarRatingByProductId(productDetail.productDetailId)}"
                                            ng-repeat="star in numStar track by $index"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="center_center mt--20">
                <a class="flashsale-xemthem" ng-click="loadMoreProductByBrand()" th:text="#{lo.mn.flsee}">Xem thêm</a>
            </div>
        </div>

    </section>
    <!-- ================================ End THƯƠNG HIỆU NỔI BẬT  ======================================== -->
    <section class="mb--30">
        <div class="container">
            <div class="row">
                <div class="col-xl-3 col-md-6 mt--30">
                    <div class="feature-box h-100">
                        <div class="icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <div class="text">
                            <h5 th:text="#{lo.mn.mphi}">Miễn Phí Vận Chuyển Mặt Hàng</h5>
                            <p th:text="#{lo.mn.dhang}">Đơn hàng trên 500.000đ</p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mt--30">
                    <div class="feature-box h-100">
                        <div class="icon">
                            <i class="fas fa-redo-alt"></i>
                        </div>
                        <div class="text">
                            <h5 th:text="#{lo.mn.dbhtien}">Đảm Bảo Hoàn Tiền </h5>
                            <p th:text="#{lo.mn.htien}">100% hoàn tiền</p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mt--30">
                    <div class="feature-box h-100">
                        <div class="icon">
                            <i class="fas fa-piggy-bank"></i>
                        </div>
                        <div class="text">
                            <h5 th:text="#{lo.mn.tienmat}">Thanh toán bằng ví điện tử</h5>
                            <p th:text="#{lo.mn.tkh}">Tiết kiệm hơn khi mua hàng</p>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mt--30">
                    <div class="feature-box h-100">
                        <div class="icon">
                            <i class="fas fa-life-ring"></i>
                        </div>
                        <div class="text">
                            <h5 th:text="#{lo.mn.trgiup}"> Trợ Giúp & Hỗ Trợ </h5>
                            <p th:text="#{lo.mn.goi}">Gọi cho chúng tôi: + 0123.4567.89</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="mb--30">
        <h2 class="sr-only">Promotion Section</h2>
        <div class="container">
            <div class="row space-db--30">
                <div class="col-lg-6 col-md-6 mb--30">
                    <a href="" class="promo-image promo-overlay">
                        <img src="/client/image/bg-images/promo-banner-with-text.webp" alt="">
                    </a>
                </div>
                <div class="col-lg-6 col-md-6 mb--30">
                    <a href="" class="promo-image promo-overlay">
                        <img src="/client/image/bg-images/promo-banner-with-text-2.webp" alt="">
                    </a>
                </div>
            </div>
        </div>
    </section>
    <section class="section-margin">
        <h2 class="sr-only">Brand Slider</h2>
        <div class="container">
            <div class="brand-slider sb-slick-slider border-top border-bottom" data-slick-setting='{
                                                            "autoplay": true,
                                                            "autoplaySpeed": 8000,
                                                            "slidesToShow": 6
                                                            }' data-slick-responsive='[
                                {"breakpoint":992, "settings": {"slidesToShow": 4} },
                                {"breakpoint":768, "settings": {"slidesToShow": 3} },
                                {"breakpoint":575, "settings": {"slidesToShow": 3} },
                                {"breakpoint":480, "settings": {"slidesToShow": 2} },
                                {"breakpoint":320, "settings": {"slidesToShow": 1} }
                            ]'>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-1.jpg" alt="">
                </div>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-2.jpg" alt="">
                </div>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-3.jpg" alt="">
                </div>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-4.jpg" alt="">
                </div>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-5.jpg" alt="">
                </div>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-6.jpg" alt="">
                </div>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-6.jpg" alt="">
                </div>
                <div class="single-slide">
                    <img src="https://htmldemo.net/pustok/pustok/image/others/brand-6.jpg" alt="">
                </div>
            </div>
        </div>
    </section>

    <!-- ===================MODEL QUICKLIST ========================-->
    <!-- Modal -->
    <div class="modal fade modal-quick-view" id="quickModal" tabindex="-1" role="dialog" aria-labelledby="quickModal"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="product-details-modal">
                    <div class="row">
                        <div class="col-lg-5">
                            <!-- Product Details Slider Big Image-->
                            <div class="product-details-slider sb-slick-slider arrow-type-two">
                                <div class="single-slide">
                                    <img ng-src="{{quickViewProduct.image}}" alt="Product Image">

                                </div>
                            </div>

                        </div>
                        <div class="col-lg-7 mt--30 mt-lg--30">
                            <div class="product-details-info pl-lg--30 ">
                                <h3 class="product-title">{{quickViewProduct.product.productName}}
                                </h3>
                                <ul class="list-unstyled">
                                    <li ng-if="quickViewProduct.product.publisher.publisherName">Nhà Cung Cấp:
                                        <span
                                            class="list-value">{{quickViewProduct.product.publisher.publisherName}}</span>
                                    </li>
                                    <li ng-if="quickViewProduct.product.brand.brandName">Thương Hiệu: <a href="#"
                                            class="list-value font-weight-bold">
                                            {{quickViewProduct.product.brand.brandName}}</a></li>
                                    <li>Mã hàng: <span
                                            class="list-value">SP-{{quickViewProduct.product.productId}}</span>
                                    </li>
                                    <li ng-if="quickViewProduct.product.publisher.publisherName">Nhà Xuất Bản:
                                        <span
                                            class="list-value">{{quickViewProduct.product.publisher.publisherName}}</span>
                                    </li>
                                </ul>
                                <div class="price-block">
                                    <span class="price">{{quickViewProduct.price -
                                        quickViewProduct.priceDiscount > 0 ?
                                        quickViewProduct.priceDiscount : quickViewProduct.price |
                                        number:'0'}}đ
                                    </span>
                                    <del class="price-old"
                                        ng-if="quickViewProduct.price - quickViewProduct.priceDiscount > 0">
                                        {{quickViewProduct.price
                                        |
                                        number:'0'}}đ
                                    </del>
                                    <span class="price-discount"
                                        ng-if="getDiscountValueByProductId(quickViewProduct.productDetailId)">{{getDiscountValueByProductId(quickViewProduct.productDetailId)}}%</span>
                                </div>
                                <div class="rating-widget">
                                    <div class="rating-block">
                                        <div class="rating-star">
                                            <span class="fas fa-star"
                                                ng-class="{star_on: star <= getStarRatingByProductId(quickViewProduct.productDetailId)}"
                                                ng-repeat="star in numStar track by $index"></span>
                                        </div>
                                    </div>
                                    <div class="review-widget">
                                        <a href="">({{countReviewsOfProduct(quickViewProduct.productDetailId)}}
                                            đánh giá)</a>
                                    </div>
                                </div>
                                <article class="product-details-article mb-4">
                                    <h4 class="sr-only">Tóm Tắt sản phẩm</h4>
                                    <p class="limit-text"
                                        ng-class="{'show-full-text': showFullText[quickViewProduct.product.productId]}">
                                        {{quickViewProduct.product.description}}
                                    </p>
                                    <span class="read-more"
                                        ng-click="toggleFullText(quickViewProduct.product.productId)">
                                        {{showFullText[quickViewProduct.product.productId] ? 'Thu
                                        gọn' : 'Xem Thêm'}}
                                    </span>

                                </article>
                                <div class="add-to-cart-row">
                                    <div class="count-input-block">
                                        <span class="widget-label">Số Lượng</span>
                                        <input type="number" class="form-control text-center"
                                            ng-model="quickViewProduct.quantity">
                                    </div>
                                    <div class="add-cart-btn">
                                        <a href="" class="btn btn-outlined--primary"
                                            ng-click="addToCart(quickViewProduct.productDetailId, quickViewProduct.quantity)"><span
                                                class="plus-icon"></span>Thêm vào giỏ hàng</a>
                                        <a ng-click="buyNow(quickViewProduct.productDetailId, quickViewProduct.quantity)"
                                            class="btn btn-outlined--primary"><span class="plus-icon"></span>Mua
                                            Ngay</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Message Cart -->
    <div class="modal fade " id="message-cart" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content model-message">
                <!-- Modal body -->
                <div class="modal-body text-center">
                    <i class="far fa-check-circle text-success mb-1" style="font-size: 50px;"></i>
                    <p class="mt--10" style="color: rgb(255, 255, 255);">{{ modalContent }}</p>
                </div>
            </div>
        </div>
    </div>
    <!-- End Message  -->
</main>

</html>




<style>
    .flash-sale-section {
        background-color: #f8f8f8;
        padding: 20px;
    }

    .flash-sale-container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .flash-sale-header {
        background-color: #26d94a;
        color: #fff;
        border: 1px solid #26d94a;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }


    .flash-sale-icon {
        width: 25px;
        height: 25px;
        margin-right: 10px;
    }

    .flash-sale-name {
        font-size: 18px;
        font-weight: bold;
    }

    .flash-sale-countdown {
        display: flex;
        align-items: center;
    }

    .countdown-item {
        font-size: 16px;
        font-weight: bold;
        margin-right: 5px;
    }

    .flash-sale-details {
        margin-bottom: 20px;
    }

    .flash-sale-time {
        display: flex;
        font-size: 14px;
        color: #888;
    }

    .start-time,
    .end-time {
        margin-right: 10px;
    }

    .flash-sale-products {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
    }

    .product-card {
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 8px;
        margin: 10px;
        padding: 20px;
        width: calc(33.333% - 20px);
        box-sizing: border-box;
        position: relative;
        transition: transform 0.3s ease-in-out;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .product-card:hover {
        transform: scale(1.1);
    }


    .product-card h3 a {
        font-size: 1.5rem;
        color: #333;
        text-decoration: none;
        transition: color 0.3s;
    }

    .product-card h3 a:hover {
        color: #26d94a;
    }

    .product-image {
        position: relative;
    }

    .hover-contents {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s;
    }

    .product-image:hover .hover-contents {
        opacity: 1;
    }

    .hover-btn {
        color: #fff;
        font-size: 20px;
        margin: 0 5px;
    }

    .price-block {
        margin-top: 10px;
    }

    .price {
        font-size: 18px;
        font-weight: bold;
        color: #26d94a;
    }

    .price-old {
        color: #888;
        text-decoration: line-through;
        margin-right: 5px;
    }

    .price-discount {
        color: #fff;
        font-weight: bold;
        margin-left: 5px;
    }

    .product-header {
        margin-top: 10px;
    }

    .product-header h3 {
        font-size: 16px;
    }

    .progress-bar-container {
    margin-top: 10px;
    position: relative; /* Để có thể định dạng tiện ích con */
}

.progress-bar {
    height: 10px;
    background-color: #26d94a;
    position: relative;
}

.progress-label {
    display: block;
    margin-top: 5px;
    font-size: 14px;
    color: #888;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap; /* Ngăn chữ bị tràn khi quá dài */
}

</style>