<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
    th:replace="~{client/main-layout.html :: layout (~{::title}, ~{::#layout})}">

<head>
    <title>Tài khoản</title>
</head>
<main id="layout" ng-controller="OrderDetailController">
    <div class="site-wrapper " id="top" ng-controller="accountController">
        <section class="breadcrumb-section">
            <div class="container">
                <div class="breadcrumb-contents">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/index">Trang chủ</a></li>
                            <li class="breadcrumb-item ">Tài khoản</li>
                            <li class="breadcrumb-item active">Đơn hàng</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </section>
        <div class="page-section inner-page-sec-padding">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="row">
                            <!-- My Account Tab Menu Start -->
                            <div class="col-lg-3 col-12">
                                <div class="myaccount-tab-menu nav" role="tablist">
                                    <a href="/account">
                                        <i class="fas fa-tachometer-alt"></i>
                                        <span th:text="#{lo.mn.bdk}">Bảng điều khiển tài khoản</span>
                                    </a>
                                    <a href="/account/info">
                                        <i class="fa fa-user"></i>
                                        <span th:text="#{lo.mn.tttk}">Thông tin tài khoản</span>
                                    </a>
                                    <a href="/account/order" class="active">
                                        <i class="fa fa-cart-arrow-down"></i>
                                        <span th:text="#{lo.mn.dhct}">Đơn hàng của tôi</span>
                                    </a>
                                    <a href="/account/address">
                                        <i class="fa fa-map-marker"></i>
                                        <span th:text="#{lo.mn.tabaddress}">Địa chỉ</span>
                                    </a>
                                    <a href="/account/voucher">
                                        <i class="fa fa-percent"></i>
                                        <span th:text="#{lo.mn.tabvoucher}"> Voucher của tôi</span>
                                    </a>
                                    <a href="/account/notification">
                                        <i class="fa fa-bell"></i>
                                        <span th:text="#{lo.mn.messenger}">Thông báo</span>
                                    </a>
                                    <a href="/account/review">
                                        <i class="fa fa-comment"></i>
                                        <span th:text="#{lo.mn.nxct}">Nhận xét của tôi</span>
                                    </a>
                                </div>
                            </div>
                            <!-- My Account Tab Menu End -->
                            <!-- My Account Tab Content Start -->
                            <div class="col-lg-9 col-12 mt--30 mt-lg--0">
                                <div class="tab-content" id="myaccountContent">
                                    <!-- Single Tab Content Start -->
                                    <div class="tab-pane fade show active" id="orders" role="tabpanel">
                                        <div class="col-md-12">
                                            <div class="card-order mb-2 mt-4">
                                                <!-- <ul class="nav nav-tabs" id="myTabs"> -->
                                                <ul class="nav nav-tabs d-flex justify-content-center align-items-center"
                                                    id="myTabs">
                                                    <li ng-class="{active: selectedStatus === 'All'}" class="nav-item">
                                                        <a class="nav-link active" id="tab1" data-bs-toggle="tab"
                                                            ng-click="setListOrderByStatus('All')" href="#content1">Tất
                                                            cả</a>
                                                    </li>
                                                    <li ng-class="{active: selectedStatus === 'Pending Confirmation'}"
                                                        class="nav-item">
                                                        <a class="nav-link" id="tab2" data-bs-toggle="tab"
                                                            ng-click="setListOrderByStatus('Pending Confirmation')"
                                                            href="#content2">Chờ xác nhận</a>
                                                    </li>
                                                    <li ng-class="{active: selectedStatus === 'Pending Handover'}"
                                                        class="nav-item">
                                                        <a class="nav-link" id="tab3" data-bs-toggle="tab"
                                                            ng-click="setListOrderByStatus('Pending Handover')"
                                                            href="#content3">Chờ bàn giao</a>
                                                    </li>
                                                    <li ng-class="{active: selectedStatus === 'In Transit'}"
                                                        class="nav-item">
                                                        <a class="nav-link" id="tab4" data-bs-toggle="tab"
                                                            ng-click="setListOrderByStatus('In Transit')"
                                                            href="#content4">Đang giao</a>
                                                    </li>
                                                    <li ng-class="{active: selectedStatus === 'Completed'}"
                                                        class="nav-item">
                                                        <a class="nav-link" id="tab5" data-bs-toggle="tab"
                                                            ng-click="setListOrderByStatus('Completed')"
                                                            href="#content5">Hoàn thành</a>
                                                    </li>
                                                    <li ng-class="{active: selectedStatus === 'Canceled'}"
                                                        class="nav-item">
                                                        <a class="nav-link" id="tab6" data-bs-toggle="tab"
                                                            ng-click="setListOrderByStatus('Canceled')"
                                                            href="#content6">Đã hủy</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="myaccount-content order-content">
                                            <!-- <h3>Đơn hàng của tôi</h3> -->
                                            <div class="tab-content">
                                                <!-- Tất cả -->
                                                <div class="tab-pane fade show active" id="content1">
                                                    <!-- Kiểm tra nếu không có đơn hàng -->
                                                    <div ng-if="!hasOrders" class="card card-height">
                                                        <div
                                                            class="card-body p-4 d-flex align-items-center justify-content-center">
                                                            <div class="row">
                                                                <div class="col-md-4 m-auto col-12 text-center">
                                                                    <img src="/client/image/order.png" class="img-fluid"
                                                                        alt="Không có đơn hàng nào">
                                                                </div>
                                                                <div class="col-md-12 text-center">
                                                                    <strong>Huh!!! Bạn chưa có đơn hàng nào</strong>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-repeat="order in filteredOrders"
                                                        class="card text-decoration-none text-dark"
                                                        ng-if="shouldShowOrder(order)">
                                                        <hr style="color: red;">
                                                        <div class="card-body order-body">
                                                            <div class="row ">
                                                                <div class="col-md-2 d-flex justify-content-start ">
                                                                    {{ order.orderCode }}
                                                                </div>
                                                                <div class="col-md-10 d-flex justify-content-end ">
                                                                    <span class="fw-normal mb-0">Đơn hàng của bạn đã
                                                                        được giao thành công |
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Confirmation'">Chờ
                                                                            Xác Nhận</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Handover'">Chờ
                                                                            Bàn Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'In Transit'">Đang
                                                                            Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Returning'">Đang
                                                                            Hoàn Hàng</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Redelivery Confirmation'">Chờ
                                                                            Xác Nhận Giao Lại</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Completed'">Hoàn
                                                                            Thành</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Canceled'">Đã
                                                                            Hủy</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Lost/Damaged Goods'">Hàng
                                                                            Thất Lạc - Hư Hỏng</strong>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div ng-repeat="orderDetail  in listOrderDetails[order.orderCode]"
                                                                class="row order-item align-items-center">
                                                                <div class="col-md-2">
                                                                    <img ng-src="{{orderDetail.productDetail.image}}"
                                                                        style="width: 80px; height: 80px;"
                                                                        class="img-fluid" alt="Sản phẩm không có ảnh">
                                                                </div>
                                                                <div
                                                                    class="col-md-7 order-name d-flex justify-content-left">
                                                                    <div>
                                                                        <p class="fw-normal mb-0">{{
                                                                            orderDetail.productName }}</p>
                                                                        <p>x{{ orderDetail.quantity }}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 d-flex justify-content-end">
                                                                    <div class="order-price">
                                                                        <p class="fw-normal mb-0">
                                                                            <del class="order-price-origin"><sup>đ</sup>{{orderDetail.productDetail.price
                                                                                | number:'0'}}</del>
                                                                            <sup>đ</sup>{{orderDetail.productDetail.priceDiscount|
                                                                            number:'0'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div class="row ">
                                                                <div class="col-md-12 d-flex justify-content-end ">
                                                                    <span class="lead fw-normal mb-0">Tổng tiền : {{
                                                                        order.codAmount|number:'0' }}</span>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col-md-6 d-flex justify-content-start align-items-center">
                                                                    <small class="text-muted font-weight-bold">Ngày đặt hàng: {{ order.create_Date | date:' HH:mm dd/MM/yyyy ' }}</small>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-2">
                                                                <div class="col-md-4 d-flex justify-content-start align-items-center">
                    
                                                                </div>
                                                                <div class="order-btn col-md-8">
                                                                    <!-- Hủy Đơn -->
                                                                    <a ng-if="['Pending Confirmation', 'Pending Handover'].includes(order.status)"
                                                                       ng-href="javascript:void(0)" 
                                                                       ng-click="showCancelModal(order)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Hủy đơn</a>
                                                                    <!-- Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial shadow-none text-center mr-4">Đánh giá</a>
                                                                    <!-- Mua Lại (Chỉ cho trạng thái Hoàn Thành hoặc Đã Hủy) -->
                                                                    <a ng-if="['Completed', 'Canceled'].includes(order.status)"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Mua lại</a>
                                                                    <!-- Liên Hệ -->
                                                                    <a ng-href="/lien-he"
                                                                       class="btn btn-outline-dark shadow-none text-center mr-4">Liên hệ</a>
                                                                    <!-- Xem Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-dark shadow-none text-center">Xem đánh giá</a>
                                                                </div>
                                                            </div>                                                                                                        
                                                        </div>
                                                        <hr style="color: red;">
                                                    </div>
                                                </div>

                                                <!-- Chờ xác nhận -->
                                                <div class="tab-pane fade" id="content2">
                                                    <!-- Kiểm tra nếu không có đơn hàng -->
                                                    <div ng-if="!hasOrders" class="card card-height">
                                                        <div
                                                            class="card-body p-4 d-flex align-items-center justify-content-center">
                                                            <div class="row">
                                                                <div class="col-md-4 m-auto col-12 text-center">
                                                                    <img src="/client/image/order.png" class="img-fluid"
                                                                        alt="Không có đơn hàng nào">
                                                                </div>
                                                                <div class="col-md-12 text-center">
                                                                    <strong>Huh!!! Bạn chưa có đơn hàng nào</strong>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-repeat="order in filteredOrders"
                                                        class="card text-decoration-none text-dark"
                                                        ng-if="shouldShowOrder(order)">
                                                        <hr style="color: red;">
                                                        <div class="card-body order-body">
                                                            <div class="row ">
                                                                <div class="col-md-2 d-flex justify-content-start ">
                                                                    {{ order.orderCode }}
                                                                </div>
                                                                <div class="col-md-10 d-flex justify-content-end ">
                                                                    <span class="fw-normal mb-0">Đơn hàng của bạn đã
                                                                        được giao thành công |
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Confirmation'">Chờ
                                                                            Xác Nhận</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Handover'">Chờ
                                                                            Bàn Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'In Transit'">Đang
                                                                            Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Returning'">Đang
                                                                            Hoàn Hàng</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Redelivery Confirmation'">Chờ
                                                                            Xác Nhận Giao Lại</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Completed'">Hoàn
                                                                            Thành</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Canceled'">Đã
                                                                            Hủy</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Lost/Damaged Goods'">Hàng
                                                                            Thất Lạc - Hư Hỏng</strong>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div ng-repeat="orderDetail  in listOrderDetails[order.orderCode]"
                                                                class="row order-item align-items-center">
                                                                <div class="col-md-2">
                                                                    <img ng-src="{{orderDetail.productDetail.image}}"
                                                                        style="width: 80px; height: 80px;"
                                                                        class="img-fluid" alt="Sản phẩm không có ảnh">
                                                                </div>
                                                                <div
                                                                    class="col-md-7 order-name d-flex justify-content-left">
                                                                    <div>
                                                                        <p class="fw-normal mb-0">{{
                                                                            orderDetail.productName }}</p>
                                                                        <p>x{{ orderDetail.quantity }}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 d-flex justify-content-end">
                                                                    <div class="order-price">
                                                                        <p class="fw-normal mb-0">
                                                                            <del class="order-price-origin"><sup>đ</sup>{{orderDetail.productDetail.price
                                                                                | number:'0'}}</del>
                                                                            <sup>đ</sup>{{orderDetail.productDetail.priceDiscount|
                                                                            number:'0'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div class="row ">
                                                                <div class="col-md-12 d-flex justify-content-end ">
                                                                    <span class="lead fw-normal mb-0">Tổng tiền : {{
                                                                        order.codAmount|number:'0' }}</span>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col-md-6 d-flex justify-content-start align-items-center">
                                                                    <small class="text-muted font-weight-bold">Ngày đặt hàng: {{ order.create_Date | date:' HH:mm dd/MM/yyyy ' }}</small>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-2">
                                                                <div class="col-md-4 d-flex justify-content-start align-items-center">
                    
                                                                </div>
                                                                <div class="order-btn col-md-8">
                                                                    <!-- Hủy Đơn -->
                                                                    <a ng-if="['Pending Confirmation', 'Pending Handover'].includes(order.status)"
                                                                       ng-href="javascript:void(0)" 
                                                                       ng-click="showCancelModal(order)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Hủy đơn</a>
                                                                    <!-- Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial shadow-none text-center mr-4">Đánh giá</a>
                                                                    <!-- Mua Lại (Chỉ cho trạng thái Hoàn Thành hoặc Đã Hủy) -->
                                                                    <a ng-if="['Completed', 'Canceled'].includes(order.status)"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Mua lại</a>
                                                                    <!-- Liên Hệ -->
                                                                    <a ng-href="/lien-he"
                                                                       class="btn btn-outline-dark shadow-none text-center mr-4">Liên hệ</a>
                                                                    <!-- Xem Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-dark shadow-none text-center">Xem đánh giá</a>
                                                                </div>
                                                            </div>                                                                                                        
                                                        </div>
                                                        <hr style="color: red;">
                                                    </div>
                                                </div>
                                                <!-- CHỜ BÀN GIAO -->
                                                <div class="tab-pane fade" id="content3">
                                                    <!-- Kiểm tra nếu không có đơn hàng -->
                                                    <div ng-if="!hasOrders" class="card card-height">
                                                        <div
                                                            class="card-body p-4 d-flex align-items-center justify-content-center">
                                                            <div class="row">
                                                                <div class="col-md-4 m-auto col-12 text-center">
                                                                    <img src="/client/image/order.png" class="img-fluid"
                                                                        alt="Không có đơn hàng nào">
                                                                </div>
                                                                <div class="col-md-12 text-center">
                                                                    <strong>Huh!!! Bạn chưa có đơn hàng nào</strong>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-repeat="order in filteredOrders"
                                                        class="card text-decoration-none text-dark"
                                                        ng-if="shouldShowOrder(order)">
                                                        <hr style="color: red;">
                                                        <div class="card-body order-body">
                                                            <div class="row ">
                                                                <div class="col-md-2 d-flex justify-content-start ">
                                                                    {{ order.orderCode }}
                                                                </div>
                                                                <div class="col-md-10 d-flex justify-content-end ">
                                                                    <span class="fw-normal mb-0">Đơn hàng của bạn đã
                                                                        được giao thành công |
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Confirmation'">Chờ
                                                                            Xác Nhận</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Handover'">Chờ
                                                                            Bàn Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'In Transit'">Đang
                                                                            Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Returning'">Đang
                                                                            Hoàn Hàng</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Redelivery Confirmation'">Chờ
                                                                            Xác Nhận Giao Lại</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Completed'">Hoàn
                                                                            Thành</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Canceled'">Đã
                                                                            Hủy</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Lost/Damaged Goods'">Hàng
                                                                            Thất Lạc - Hư Hỏng</strong>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div ng-repeat="orderDetail  in listOrderDetails[order.orderCode]"
                                                                class="row order-item align-items-center">
                                                                <div class="col-md-2">
                                                                    <img ng-src="{{orderDetail.productDetail.image}}"
                                                                        style="width: 80px; height: 80px;"
                                                                        class="img-fluid" alt="Sản phẩm không có ảnh">
                                                                </div>
                                                                <div
                                                                    class="col-md-7 order-name d-flex justify-content-left">
                                                                    <div>
                                                                        <p class="fw-normal mb-0">{{
                                                                            orderDetail.productName }}</p>
                                                                        <p>x{{ orderDetail.quantity }}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 d-flex justify-content-end">
                                                                    <div class="order-price">
                                                                        <p class="fw-normal mb-0">
                                                                            <del class="order-price-origin"><sup>đ</sup>{{orderDetail.productDetail.price
                                                                                | number:'0'}}</del>
                                                                            <sup>đ</sup>{{orderDetail.productDetail.priceDiscount|
                                                                            number:'0'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div class="row ">
                                                                <div class="col-md-12 d-flex justify-content-end ">
                                                                    <span class="lead fw-normal mb-0">Tổng tiền : {{
                                                                        order.codAmount|number:'0' }}</span>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col-md-6 d-flex justify-content-start align-items-center">
                                                                    <small class="text-muted font-weight-bold">Ngày đặt hàng: {{ order.create_Date | date:' HH:mm dd/MM/yyyy ' }}</small>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-2">
                                                                <div class="col-md-4 d-flex justify-content-start align-items-center">
                    
                                                                </div>
                                                                <div class="order-btn col-md-8">
                                                                    <!-- Hủy Đơn -->
                                                                    <a ng-if="['Pending Confirmation', 'Pending Handover'].includes(order.status)"
                                                                       ng-href="javascript:void(0)" 
                                                                       ng-click="showCancelModal(order)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Hủy đơn</a>
                                                                    <!-- Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial shadow-none text-center mr-4">Đánh giá</a>
                                                                    <!-- Mua Lại (Chỉ cho trạng thái Hoàn Thành hoặc Đã Hủy) -->
                                                                    <a ng-if="['Completed', 'Canceled'].includes(order.status)"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Mua lại</a>
                                                                    <!-- Liên Hệ -->
                                                                    <a ng-href="/lien-he"
                                                                       class="btn btn-outline-dark shadow-none text-center mr-4">Liên hệ</a>
                                                                    <!-- Xem Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-dark shadow-none text-center">Xem đánh giá</a>
                                                                </div>
                                                            </div>                                                                                                        
                                                        </div>
                                                        <hr style="color: red;">
                                                    </div>
                                                </div>
                                                <!-- ĐANG GIAO -->
                                                <div class="tab-pane fade" id="content4">
                                                    <!-- Kiểm tra nếu không có đơn hàng -->
                                                    <div ng-if="!hasOrders" class="card card-height">
                                                        <div
                                                            class="card-body p-4 d-flex align-items-center justify-content-center">
                                                            <div class="row">
                                                                <div class="col-md-4 m-auto col-12 text-center">
                                                                    <img src="/client/image/order.png" class="img-fluid"
                                                                        alt="Không có đơn hàng nào">
                                                                </div>
                                                                <div class="col-md-12 text-center">
                                                                    <strong>Huh!!! Bạn chưa có đơn hàng nào</strong>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-repeat="order in filteredOrders"
                                                        class="card text-decoration-none text-dark"
                                                        ng-if="shouldShowOrder(order)">
                                                        <hr style="color: red;">
                                                        <div class="card-body order-body">
                                                            <div class="row ">
                                                                <div class="col-md-2 d-flex justify-content-start ">
                                                                    {{ order.orderCode }}
                                                                </div>
                                                                <div class="col-md-10 d-flex justify-content-end ">
                                                                    <span class="fw-normal mb-0">Đơn hàng của bạn đã
                                                                        được giao thành công |
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Confirmation'">Chờ
                                                                            Xác Nhận</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Handover'">Chờ
                                                                            Bàn Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'In Transit'">Đang
                                                                            Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Returning'">Đang
                                                                            Hoàn Hàng</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Redelivery Confirmation'">Chờ
                                                                            Xác Nhận Giao Lại</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Completed'">Hoàn
                                                                            Thành</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Canceled'">Đã
                                                                            Hủy</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Lost/Damaged Goods'">Hàng
                                                                            Thất Lạc - Hư Hỏng</strong>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div ng-repeat="orderDetail  in listOrderDetails[order.orderCode]"
                                                                class="row order-item align-items-center">
                                                                <div class="col-md-2">
                                                                    <img ng-src="{{orderDetail.productDetail.image}}"
                                                                        style="width: 80px; height: 80px;"
                                                                        class="img-fluid" alt="Sản phẩm không có ảnh">
                                                                </div>
                                                                <div
                                                                    class="col-md-7 order-name d-flex justify-content-left">
                                                                    <div>
                                                                        <p class="fw-normal mb-0">{{
                                                                            orderDetail.productName }}</p>
                                                                        <p>x{{ orderDetail.quantity }}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 d-flex justify-content-end">
                                                                    <div class="order-price">
                                                                        <p class="fw-normal mb-0">
                                                                            <del class="order-price-origin"><sup>đ</sup>{{orderDetail.productDetail.price
                                                                                | number:'0'}}</del>
                                                                            <sup>đ</sup>{{orderDetail.productDetail.priceDiscount|
                                                                            number:'0'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div class="row ">
                                                                <div class="col-md-12 d-flex justify-content-end ">
                                                                    <span class="lead fw-normal mb-0">Tổng tiền : {{
                                                                        order.codAmount|number:'0' }}</span>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col-md-6 d-flex justify-content-start align-items-center">
                                                                    <small class="text-muted font-weight-bold">Ngày đặt hàng: {{ order.create_Date | date:' HH:mm dd/MM/yyyy ' }}</small>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-2">
                                                                <div class="col-md-4 d-flex justify-content-start align-items-center">
                    
                                                                </div>
                                                                <div class="order-btn col-md-8">
                                                                    <!-- Hủy Đơn -->
                                                                    <a ng-if="['Pending Confirmation', 'Pending Handover'].includes(order.status)"
                                                                       ng-href="javascript:void(0)" 
                                                                       ng-click="showCancelModal(order)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Hủy đơn</a>
                                                                    <!-- Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial shadow-none text-center mr-4">Đánh giá</a>
                                                                    <!-- Mua Lại (Chỉ cho trạng thái Hoàn Thành hoặc Đã Hủy) -->
                                                                    <a ng-if="['Completed', 'Canceled'].includes(order.status)"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Mua lại</a>
                                                                    <!-- Liên Hệ -->
                                                                    <a ng-href="/lien-he"
                                                                       class="btn btn-outline-dark shadow-none text-center mr-4">Liên hệ</a>
                                                                    <!-- Xem Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-dark shadow-none text-center">Xem đánh giá</a>
                                                                </div>
                                                            </div>                                                                                                        
                                                        </div>
                                                        <hr style="color: red;">
                                                    </div>
                                                </div>
                                                <!-- HOÀNH THÀNH -->
                                                <div class="tab-pane fade" id="content5">
                                                    <!-- Kiểm tra nếu không có đơn hàng -->
                                                    <div ng-if="!hasOrders" class="card card-height">
                                                        <div
                                                            class="card-body p-4 d-flex align-items-center justify-content-center">
                                                            <div class="row">
                                                                <div class="col-md-4 m-auto col-12 text-center">
                                                                    <img src="/client/image/order.png" class="img-fluid"
                                                                        alt="Không có đơn hàng nào">
                                                                </div>
                                                                <div class="col-md-12 text-center">
                                                                    <strong>Huh!!! Bạn chưa có đơn hàng nào</strong>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-repeat="order in filteredOrders"
                                                        class="card text-decoration-none text-dark"
                                                        ng-if="shouldShowOrder(order)">
                                                        <hr style="color: red;">
                                                        <div class="card-body order-body">
                                                            <div class="row ">
                                                                <div class="col-md-2 d-flex justify-content-start ">
                                                                    {{ order.orderCode }}
                                                                </div>
                                                                <div class="col-md-10 d-flex justify-content-end ">
                                                                    <span class="fw-normal mb-0">Đơn hàng của bạn đã
                                                                        được giao thành công |
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Confirmation'">Chờ
                                                                            Xác Nhận</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Handover'">Chờ
                                                                            Bàn Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'In Transit'">Đang
                                                                            Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Returning'">Đang
                                                                            Hoàn Hàng</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Redelivery Confirmation'">Chờ
                                                                            Xác Nhận Giao Lại</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Completed'">Hoàn
                                                                            Thành</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Canceled'">Đã
                                                                            Hủy</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Lost/Damaged Goods'">Hàng
                                                                            Thất Lạc - Hư Hỏng</strong>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div ng-repeat="orderDetail  in listOrderDetails[order.orderCode]"
                                                                class="row order-item align-items-center">
                                                                <div class="col-md-2">
                                                                    <img ng-src="{{orderDetail.productDetail.image}}"
                                                                        style="width: 80px; height: 80px;"
                                                                        class="img-fluid" alt="Sản phẩm không có ảnh">
                                                                </div>
                                                                <div
                                                                    class="col-md-7 order-name d-flex justify-content-left">
                                                                    <div>
                                                                        <p class="fw-normal mb-0">{{
                                                                            orderDetail.productName }}</p>
                                                                        <p>x{{ orderDetail.quantity }}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 d-flex justify-content-end">
                                                                    <div class="order-price">
                                                                        <p class="fw-normal mb-0">
                                                                            <del class="order-price-origin"><sup>đ</sup>{{orderDetail.productDetail.price
                                                                                | number:'0'}}</del>
                                                                            <sup>đ</sup>{{orderDetail.productDetail.priceDiscount|
                                                                            number:'0'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div class="row ">
                                                                <div class="col-md-12 d-flex justify-content-end ">
                                                                    <span class="lead fw-normal mb-0">Tổng tiền : {{
                                                                        order.codAmount|number:'0' }}</span>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col-md-6 d-flex justify-content-start align-items-center">
                                                                    <small class="text-muted font-weight-bold">Ngày đặt hàng: {{ order.create_Date | date:' HH:mm dd/MM/yyyy ' }}</small>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-2">
                                                                <div class="col-md-4 d-flex justify-content-start align-items-center">
                    
                                                                </div>
                                                                <div class="order-btn col-md-8">
                                                                    <!-- Hủy Đơn -->
                                                                    <a ng-if="['Pending Confirmation', 'Pending Handover'].includes(order.status)"
                                                                       ng-href="javascript:void(0)" 
                                                                       ng-click="showCancelModal(order)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Hủy đơn</a>
                                                                    <!-- Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial shadow-none text-center mr-4">Đánh giá</a>
                                                                    <!-- Mua Lại (Chỉ cho trạng thái Hoàn Thành hoặc Đã Hủy) -->
                                                                    <a ng-if="['Completed', 'Canceled'].includes(order.status)"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Mua lại</a>
                                                                    <!-- Liên Hệ -->
                                                                    <a ng-href="/lien-he"
                                                                       class="btn btn-outline-dark shadow-none text-center mr-4">Liên hệ</a>
                                                                    <!-- Xem Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-dark shadow-none text-center">Xem đánh giá</a>
                                                                </div>
                                                            </div>                                                                                                        
                                                        </div>
                                                        <hr style="color: red;">
                                                    </div>
                                                </div>
                                                <!-- ĐÃ HỦY -->
                                                <div class="tab-pane fade" id="content6">
                                                    <!-- Kiểm tra nếu không có đơn hàng -->
                                                    <div ng-if="!hasOrders" class="card card-height">
                                                        <div
                                                            class="card-body p-4 d-flex align-items-center justify-content-center">
                                                            <div class="row">
                                                                <div class="col-md-4 m-auto col-12 text-center">
                                                                    <img src="/client/image/order.png" class="img-fluid"
                                                                        alt="Không có đơn hàng nào">
                                                                </div>
                                                                <div class="col-md-12 text-center">
                                                                    <strong>Huh!!! Bạn chưa có đơn hàng nào</strong>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div ng-repeat="order in filteredOrders"
                                                        class="card text-decoration-none text-dark"
                                                        ng-if="shouldShowOrder(order)">
                                                        <hr style="color: red;">
                                                        <div class="card-body order-body">
                                                            <div class="row ">
                                                                <div class="col-md-2 d-flex justify-content-start ">
                                                                    {{ order.orderCode }}
                                                                </div>
                                                                <div class="col-md-10 d-flex justify-content-end ">
                                                                    <span class="fw-normal mb-0">Đơn hàng của bạn đã
                                                                        được giao thành công |
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Confirmation'">Chờ
                                                                            Xác Nhận</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Handover'">Chờ
                                                                            Bàn Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'In Transit'">Đang
                                                                            Giao</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Returning'">Đang
                                                                            Hoàn Hàng</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Pending Redelivery Confirmation'">Chờ
                                                                            Xác Nhận Giao Lại</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Completed'">Hoàn
                                                                            Thành</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Canceled'">Đã
                                                                            Hủy</strong>
                                                                        <strong class="text-primary"
                                                                            ng-if="order.status === 'Lost/Damaged Goods'">Hàng
                                                                            Thất Lạc - Hư Hỏng</strong>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div ng-repeat="orderDetail  in listOrderDetails[order.orderCode]"
                                                                class="row order-item align-items-center">
                                                                <div class="col-md-2">
                                                                    <img ng-src="{{orderDetail.productDetail.image}}"
                                                                        style="width: 80px; height: 80px;"
                                                                        class="img-fluid" alt="Sản phẩm không có ảnh">
                                                                </div>
                                                                <div
                                                                    class="col-md-7 order-name d-flex justify-content-left">
                                                                    <div>
                                                                        <p class="fw-normal mb-0">{{
                                                                            orderDetail.productName }}</p>
                                                                        <p>x{{ orderDetail.quantity }}</p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-3 d-flex justify-content-end">
                                                                    <div class="order-price">
                                                                        <p class="fw-normal mb-0">
                                                                            <del class="order-price-origin"><sup>đ</sup>{{orderDetail.productDetail.price
                                                                                | number:'0'}}</del>
                                                                            <sup>đ</sup>{{orderDetail.productDetail.priceDiscount|
                                                                            number:'0'}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr class="order-hr">
                                                            <div class="row ">
                                                                <div class="col-md-12 d-flex justify-content-end ">
                                                                    <span class="lead fw-normal mb-0">Tổng tiền : {{
                                                                        order.codAmount|number:'0' }}</span>
                                                                </div>
                                                            </div>
                                                            <div class="row ">
                                                                <div class="col-md-6 d-flex justify-content-start align-items-center">
                                                                    <small class="text-muted font-weight-bold">Ngày đặt hàng: {{ order.create_Date | date:' HH:mm dd/MM/yyyy ' }}</small>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-2">
                                                                <div class="col-md-4 d-flex justify-content-start align-items-center">
                    
                                                                </div>
                                                                <div class="order-btn col-md-8">
                                                                    <!-- Hủy Đơn -->
                                                                    <a ng-if="['Pending Confirmation', 'Pending Handover'].includes(order.status)"
                                                                       ng-href="javascript:void(0)" 
                                                                       ng-click="showCancelModal(order)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Hủy đơn</a>
                                                                    <!-- Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial shadow-none text-center mr-4">Đánh giá</a>
                                                                    <!-- Mua Lại (Chỉ cho trạng thái Hoàn Thành hoặc Đã Hủy) -->
                                                                    <a ng-if="['Completed', 'Canceled'].includes(order.status)"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-primary btnspecial text-center mr-4">Mua lại</a>
                                                                    <!-- Liên Hệ -->
                                                                    <a ng-href="/lien-he"
                                                                       class="btn btn-outline-dark shadow-none text-center mr-4">Liên hệ</a>
                                                                    <!-- Xem Đánh Giá (Chỉ cho trạng thái Hoàn Thành) -->
                                                                    <a ng-if="order.status === 'Completed'"
                                                                       ng-href="javascript:void(0)"
                                                                       class="btn btn-outline-dark shadow-none text-center">Xem đánh giá</a>
                                                                </div>
                                                            </div>                                                                                                        
                                                        </div>
                                                        <hr style="color: red;">
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!-- Single Tab Content End -->
                                </div>
                                <!-- My Account Tab Content End -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Modal Cancel -->
            <div class="modal fade order-cancel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true" id="order-cancel">
                <div class="modal-dialog text-left">
                    <div class="modal-content pb-3">
                        <div class="modal-header bg-danger">
                            <h5 class="modal-title text-white" id="exampleModalLabel">
                                THÔNG BÁO - ĐƠN HÀNG <u>{{cacelOrder.orderCode}}</u>
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <form>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="message-text" class="col-form-label h6 text-uppercase text-danger">Nội
                                        dung (LÝ DO HỦY ĐƠN):</label>
                                    <textarea ng-model="cacelOrder.noteCancel" name="message" class="form-control"
                                        required style="height: 200px;" placeholder="Nhập nội dung ...."></textarea>
                                    <span class="text-danger" ng-show="errorsNoteCancel">*{{errorsNoteCancel}}</span>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" ng-click="confirmCancel()">
                                    Xác nhận
                                </button>
                                <button type="button" class="btn btn-info" data-dismiss="modal" ng-click="clearCacel()">
                                    Hủy bỏ
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

</main>

</html>