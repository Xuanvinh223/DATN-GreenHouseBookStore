<div class="container-fluid" ng-controller="flashsaleController">
    <div class="row justify-content-center">
        <div class="col-12">
            <div class="card  mb-3">
                <h4 class="mb-3 mt-3 ml-3">Tạo chiến dịch Flash Sale</h4>
            </div>
            <div class="row ">
                <!-- Recent Activity -->
                <div class="col-md-4 mb-4">
                    <div class="card timeline shadow">
                        <div class="card-header">
                            <strong class="card-title">Thông tin sản phẩm</strong>
                            <!-- <a class="float-right small text-muted" href="#!">View all</a> -->
                        </div>
                        <div class="card-body">
                            <form>
                                <input type="hidden" ng-model="item.flashSaleId">
                                <div class="form-row">
                                    <div class="col-md-12 col-sm-12 mb-3">
                                        <label for="PublishersName">Tên Ưu Đãi(*)</label>
                                        <input type="text" ng-model="item.name" class="form-control"
                                            placeholder="Nhập Tên Flash Sale">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-md-6 mb-3">
                                        <label for="address">Giờ bắt đầu(*)</label>
                                        <div class="input-group">
                                            <input type="time" ng-model="item.startTime" class="form-control"
                                                ng-value="item.startTime" placeholder=""
                                                aria-describedby="button-addon2">
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="address">Giờ kết thúc(*)</label>
                                        <div class="input-group">
                                            <input type="time" ng-model="item.endTime" class="form-control "
                                                ng-value="item.endTime" placeholder="" aria-describedby="button-addon2">
                                        </div>
                                    </div>
                                    <div class="col-md-12 mb-3">
                                        <label for="address">Ngày thực hiện(*)</label>
                                        <div class="input-group">
                                            <input class="form-control" id="example-date" type="date"
                                                name="item.userDate" ng-model="item.userDate"
                                                ng-value="formatDate(item.userDate)">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="col-md-12 mb-3">
                                        <p class="mb-2">Trạng Thái(*)</p>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" ng-model="item.status"
                                                ng-value="1" id="active">
                                            <label class="form-check-label" for="active">Đã lên lịch</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" ng-model="item.status"
                                                ng-value="2" id="unactive">
                                            <label class="form-check-label" for="unactive">Đang sử dụng</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" ng-model="item.status"
                                                ng-value="3" id="expired">
                                            <label class="form-check-label" for="expired">Hết hạn</label>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary mr-2" ng-click="create()">Lưu</button>
                                <button type="reset" class="btn btn-info">Làm Mới</button>
                            </form>
                        </div>

                    </div>
                    <!-- / .card -->
                </div>
                <!-- / .col-md-6 -->
                <!-- Striped rows -->

                <div class="col-md-8 ">
                    <div class="card shadow">
                        <div class="card-header">
                            <a class="card-title1 " data-toggle="modal" data-target="#exampleModal">Chọn sản phẩm</a>
                            <a class="float-right small ">{{ listProductFlashSale.length }} sản phẩm được chọn</a>
                        </div>
                        <!--  -->
                        <div class="card-body" ng-if="listProductFlashSale.length > 0">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Hình ảnh</th>
                                        <th>Giá thường</th>
                                        <th>%(Chiếc khấu)</th>
                                        <th>Giá giảm</th>
                                        <th>SL giảm</th>
                                        <th>Giới hạn SL mua</th>
                                        <th>Active</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="product in listProductFlashSale track by $index">
                                        <td>{{ $index + 1 }}</td>
                                        <td class="row pr-2">
                                            <div class="col-md-4 " style="margin-right: 10px;">
                                                <img ng-src="{{product.productDetail.image}}" alt=""
                                                     style="width: 50px;height: auto;">
                                            </div>
                                            <div class="col-md-8 d-flex justify-content-center flex-column">
                                                <span class="product-name">{{ product.productDetail.product.productName
                                                    }}</span>
                                                <span class="quantity-ins">Còn: {{ product.productDetail.quantityInStock
                                                    }}</span>
                                            </div> 
                                        </td>
                                        <td> {{ product.productDetail.price| number:'0' }}</td>
                                        <td><input type="number" ng-model="product.discountPercentage"
                                                class="form-control form-control-sm"></td>
                                        <td>{{ calculateDiscountedPrice(product)| number:'0' }}</td>
                                        <td><input type="number" ng-model="product.quantity"
                                                class="form-control form-control-sm"></td>
                                        <td><input type="number" ng-model="product.purchaseLimit"
                                                class="form-control form-control-sm"></td>
                                        <td>
                                            <a ng-click="removeProduct($index)">
                                                <i class="fe fe-trash-2 fe-16"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>

                <!-- Striped rows -->
            </div>
            <!-- .row-->
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" style="font-size: 1rem;">Chọn Sản Phẩm</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <!-- Tim kiem -->
                            <div class="form-inline mb-3">
                                <div class="input-container" style="width: 50%">
                                    <div class="input-wrapper">
                                        <i class="fe fe-search fe-18 icon"></i>
                                        <!--  -->
                                        <input class="form-control input" type="search" placeholder="Tìm kiếm...">
                                    </div>
                                </div>
                            </div>
                            <table class="table table-striped table-hover">
                                <!-- HTML Table -->
                                <thead>
                                    <tr>
                                        <th>
                                            <div class="custom-control custom-checkbox">
                                                <input type="checkbox" class="custom-control-input"
                                                    ng-model="selectAllChecked" id="checkAllId" ng-change="checkAll()">
                                                <label class="custom-control-label" for="checkAllId"></label>
                                            </div>
                                        </th>
                                        <th>SẢN PHẨM</th>
                                        <th>Giá thường</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="item in listModelProduct">
                                        <td>
                                            <div class="custom-control custom-checkbox">
                                                <input class="custom-control-input" type="checkbox" id="item{{$index}}"
                                                    ng-model="item.selected" ng-change="updateSelectAll()">
                                                <label class="custom-control-label" for="item{{$index}}"></label>
                                            </div>
                                        </td>
                                        <th class="row">
                                            <div class="col-md-4">
                                                <img ng-src="{{item.image}}" alt="Lỗi ảnh"
                                                    style="width: 100px;height: auto;">
                                            </div>
                                            <div class="col-md-8 d-flex justify-content-center flex-column">
                                                <span class="product-name">{{item.product.productName}}</span>
                                                <span class="quantity-ins">Còn: {{item.quantityInStock}}</span>
                                            </div>
                                        </th>
                                        <td>{{item.price | number:'0'}} VNĐ</td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Trở Về</button>
                            <button type="button" class="btn btn-primary" ng-click="saveTam()">Lưu</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- .row -->

    </div>
    <!-- .container-fluid -->